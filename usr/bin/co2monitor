#!/usr/bin/env python3
import logging
import sys, os, glob
import gettext

# add /usr/lib to the module paths
# sys.path.insert(1,os.path.join(os.path.dirname(os.path.realpath(__file__)),
    # '../../usr/lib'))
sys.path.insert(1,"/usr/lib")

# logger
logger = logging.getLogger(__name__)

# get user system language
user_language = os.environ.get('LANGUAGE','##')
# init translation
lang = gettext.translation(
    domain    = 'co2monitor',                  # domain
    localedir = '/usr/share/co2monitor/lang',  # language folder
    languages = [user_language.split("_")[0]], # user language
    fallback  = True
    )
lang.install() # install the language

# import co2monitor
import co2monitor.gui

gui = co2monitor.gui.Co2MonitorGui()
# set up config
gui.config_setup(glob.glob("/etc/co2monitor/*.conf"))
# setup logging
gui.logging_setup()
# set up the gui
gui.setup_gui()
# run the gui
gui.run()

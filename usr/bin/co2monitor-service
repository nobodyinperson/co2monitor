#!/usr/bin/env python3
import sys
import logging
import signal

logger = logging.getLogger(__name__)

####################
### LIBRARY PATH ###
####################
# add /usr/lib/co2monitor/python to the module paths
sys.path.insert(1,"/usr/lib/co2monitor/python")
import co2monitor.config

################
### LANGUAGE ###
################
co2monitor.config.install_language_globally()

#####################
### CONFIGURATION ###
#####################
config = co2monitor.config.get_configuration()

###############
### LOGGING ###
###############
co2monitor.config.setup_logger_from_config(
    logger  = logger,
    section = 'service-logging',
    config  = config
    )

import co2monitor.service

service = co2monitor.service.Co2MonitorService()
service.set_logger(logger)
service.set_config(config)
service.run()
